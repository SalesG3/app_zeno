<section class="componente">
    <div>
        <button class="btn-voltar" routerLink="/dashbord">
            Voltar
        </button>

        <span class="comp-usuario">
            Bem-Vindo(a), {{ usuario }}!!
        </span>
    </div>

    <hr>

    <span class="comp-titulo">
        Categorias
    </span>

    <button class="btn-novo" (click)="novoRegistro()">
        Novo +
    </button>

    <table class="dataGrid">
        <tr>
            <th>Código:</th>
            <th>Categoria:</th>
            <th>Remover:</th>
        </tr>

        <tr  *ngFor="let cat of dataGrid">
            <td class="col01" (click)="consultaRegistro(cat.ID_CATEGORIA)">{{(cat.CD_CATEGORIA + '').padStart(4, '0')}}</td>
            <td class="col02" (click)="consultaRegistro(cat.ID_CATEGORIA)">{{cat.NM_CATEGORIA}}</td>
            <td class="col03" (click)="excluirRegistro(cat.ID_CATEGORIA)">✕</td>
        </tr>
    </table>

</section>

<dialog class="modal" #form>
    <form #dataForm="ngForm" (ngSubmit)="salvarRegistro()">
        <label for="CD_CATEGORIA">
            Código:
        </label>

        <input
        type="number"
        id="CD_CATEGORIA"
        [(ngModel)]="dataRow.CD_CATEGORIA"
        [disabled]="somenteLeitura"
        name="CD_CATEGORIA"
        required
        >

        <label for="NM_CATEGORIA">
            Categoria:
        </label>

        <input
        type="text"
        id="NM_CATEGORIA"
        [(ngModel)]="dataRow.NM_CATEGORIA"
        [disabled]="somenteLeitura"
        name="NM_CATEGORIA"
        required
        >

        <label for="DS_CATEGORIA">
            Descrição:
        </label>

        <textarea
        id="DS_CATEGORIA"
        [(ngModel)]="dataRow.DS_CATEGORIA"
        [disabled]="somenteLeitura"
        name="DS_CATEGORIA"
        ></textarea>

        <div *ngIf="!somenteLeitura">

            <button type="submit" class="btn-modal" [disabled]="dataForm.invalid">
                Salvar
            </button>
    
            <button type="button" class="btn-modal" (click)="cancelarRegistro()">
                Cancelar
            </button>

        </div>

        <div *ngIf="somenteLeitura">

            <button type="button" class="btn-modal" (click)="somenteLeitura = false">
                Editar
            </button>

            <button type="button" class="btn-modal" (click)="cancelarRegistro()">
                Voltar
            </button>
        </div>
    </form>
</dialog>

<dialog class=".aviso" #aviso>
    {{mensagem}}
    <button (click)="fecharAviso()">
        Ok!
    </button>
</dialog>